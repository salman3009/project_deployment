{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useUser}from'../helpers/UserProvider';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const MusicPlayer=selectedMusic=>{const audioRef=useRef();const[addedToWatchlist,setAddedToWatchlist]=useState(false);debugger;const{getUser}=useUser();const{thumbnail,title,artist,audio_url,songId,heart}=selectedMusic;const artistList=artist&&artist.map(item=>item.name).join(\" & \");useEffect(()=>{setAddedToWatchlist(heart);audioRef.current.play();},[selectedMusic]);const AddFavorite=songId=>{axios.patch('https://academics.newtonschool.co/api/v1/music/favorites/like',{\"songId\":songId},{headers:{Authorization:\"Bearer \".concat(getUser.token)}}).then(response=>{setAddedToWatchlist(true);}).catch(error=>{console.log(error);});};return/*#__PURE__*/_jsxs(\"section\",{className:\"music-player\",children:[/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:title,height:\"50\",width:\"50\"}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"song-info\",children:[/*#__PURE__*/_jsx(\"div\",{children:title}),/*#__PURE__*/_jsx(\"div\",{title:artistList,className:\"artist-list\",children:artistList})]}),/*#__PURE__*/_jsx(\"audio\",{controls:true,ref:audioRef,src:audio_url}),/*#__PURE__*/_jsx(\"div\",{className:\"heart-icon\",children:getUser&&(addedToWatchlist?/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-heart\"}):/*#__PURE__*/_jsx(\"i\",{onClick:()=>AddFavorite(songId),class:\"fa-regular fa-heart\"}))})]})]});};export default MusicPlayer;","map":{"version":3,"names":["React","useEffect","useRef","useState","useUser","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MusicPlayer","selectedMusic","audioRef","addedToWatchlist","setAddedToWatchlist","getUser","thumbnail","title","artist","audio_url","songId","heart","artistList","map","item","name","join","current","play","AddFavorite","patch","headers","Authorization","concat","token","then","response","catch","error","console","log","className","children","src","alt","height","width","controls","ref","class","onClick"],"sources":["/Users/salmanahmedg/Documents/NEWTON_BATCH/project_deployment/src/components/MusicPlayer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useUser } from '../helpers/UserProvider';\nimport axios from 'axios';\n\nexport const MusicPlayer = (selectedMusic) => {\n\n  const audioRef = useRef();\n  const [addedToWatchlist, setAddedToWatchlist] = useState(false);\n  debugger;\n  const {getUser} = useUser();\n  const { thumbnail, title, artist, audio_url,songId,heart } = selectedMusic;\n\n  const artistList = artist && artist.map((item) => item.name).join(\" & \");\n\n  useEffect(() => {\n    setAddedToWatchlist(heart);\n    audioRef.current.play();\n  }, [selectedMusic])\n\n  const AddFavorite = (songId) => {\n    axios.patch('https://academics.newtonschool.co/api/v1/music/favorites/like', { \"songId\": songId }, {\n      headers: {\n        Authorization: `Bearer ${getUser.token}`\n      }\n    }).then((response) => {\n      setAddedToWatchlist(true);\n    }).catch((error) => {\n      console.log(error);\n    })\n  }\n\n  return (\n    <section className=\"music-player\">\n      <img src={thumbnail} alt={title} height=\"50\" width=\"50\" />\n      <>\n        <div className=\"song-info\">\n          <div>{title}</div>\n          <div title={artistList} className=\"artist-list\">\n            {artistList}\n          </div>\n        </div>\n        <audio controls ref={audioRef} src={audio_url} />\n\n        <div className=\"heart-icon\">\n          {getUser && (addedToWatchlist ? <i class=\"fa-solid fa-heart\"></i> : <i  onClick={() => AddFavorite(songId)} class=\"fa-regular fa-heart\"></i>)}\n        </div>\n      </>\n    </section>\n  );\n};\n\nexport default MusicPlayer;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1B,MAAO,MAAM,CAAAC,WAAW,CAAIC,aAAa,EAAK,CAE5C,KAAM,CAAAC,QAAQ,CAAGZ,MAAM,CAAC,CAAC,CACzB,KAAM,CAACa,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAC/D,SACA,KAAM,CAACc,OAAO,CAAC,CAAGb,OAAO,CAAC,CAAC,CAC3B,KAAM,CAAEc,SAAS,CAAEC,KAAK,CAAEC,MAAM,CAAEC,SAAS,CAACC,MAAM,CAACC,KAAM,CAAC,CAAGV,aAAa,CAE1E,KAAM,CAAAW,UAAU,CAAGJ,MAAM,EAAIA,MAAM,CAACK,GAAG,CAAEC,IAAI,EAAKA,IAAI,CAACC,IAAI,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC,CAExE3B,SAAS,CAAC,IAAM,CACde,mBAAmB,CAACO,KAAK,CAAC,CAC1BT,QAAQ,CAACe,OAAO,CAACC,IAAI,CAAC,CAAC,CACzB,CAAC,CAAE,CAACjB,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAkB,WAAW,CAAIT,MAAM,EAAK,CAC9BjB,KAAK,CAAC2B,KAAK,CAAC,+DAA+D,CAAE,CAAE,QAAQ,CAAEV,MAAO,CAAC,CAAE,CACjGW,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYlB,OAAO,CAACmB,KAAK,CACxC,CACF,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,EAAK,CACpBtB,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAAC,CAACuB,KAAK,CAAEC,KAAK,EAAK,CAClBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACpB,CAAC,CAAC,CACJ,CAAC,CAED,mBACE/B,KAAA,YAASkC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC/BrC,IAAA,QAAKsC,GAAG,CAAE3B,SAAU,CAAC4B,GAAG,CAAE3B,KAAM,CAAC4B,MAAM,CAAC,IAAI,CAACC,KAAK,CAAC,IAAI,CAAE,CAAC,cAC1DvC,KAAA,CAAAE,SAAA,EAAAiC,QAAA,eACEnC,KAAA,QAAKkC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBrC,IAAA,QAAAqC,QAAA,CAAMzB,KAAK,CAAM,CAAC,cAClBZ,IAAA,QAAKY,KAAK,CAAEK,UAAW,CAACmB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAC5CpB,UAAU,CACR,CAAC,EACH,CAAC,cACNjB,IAAA,UAAO0C,QAAQ,MAACC,GAAG,CAAEpC,QAAS,CAAC+B,GAAG,CAAExB,SAAU,CAAE,CAAC,cAEjDd,IAAA,QAAKoC,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxB3B,OAAO,GAAKF,gBAAgB,cAAGR,IAAA,MAAG4C,KAAK,CAAC,mBAAmB,CAAI,CAAC,cAAG5C,IAAA,MAAI6C,OAAO,CAAEA,CAAA,GAAMrB,WAAW,CAACT,MAAM,CAAE,CAAC6B,KAAK,CAAC,qBAAqB,CAAI,CAAC,CAAC,CAC1I,CAAC,EACN,CAAC,EACI,CAAC,CAEd,CAAC,CAED,cAAe,CAAAvC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}