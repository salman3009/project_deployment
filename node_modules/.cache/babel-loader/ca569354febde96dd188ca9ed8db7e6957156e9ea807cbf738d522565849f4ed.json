{"ast":null,"code":"import{useState,useEffect}from'react';import axios from'axios';import MusicCard from'../components/MusicCard';import MusicPlayer from'../components/MusicPlayer';import Sidebar from'../pages/Sidebar';import{useUser}from'../helpers/UserProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Library(){const[isLoading,setIsLoading]=useState(false);const[musicsList,setMusicList]=useState([]);const[selectedMusic,setMusic]=useState(null);const{getUser}=useUser();const fetchMusics=async()=>{try{setIsLoading(true);const musics=await axios.get('https://academics.newtonschool.co/api/v1/music/favorites/like',{headers:{Authorization:\"Bearer \".concat(getUser.token)}});console.log(\"musics\",musics.data.data);const musicListData=musics.data.data.songs;setMusicList(musicListData);}catch(err){console.log(err);}finally{setIsLoading(false);}};useEffect(()=>{fetchMusics();},[]);const setMusicHandler=id=>{let selectedMusic=musicsList[id];setMusic(selectedMusic);};const removeFavorite=songId=>{axios.patch('https://academics.newtonschool.co/api/v1/music/favorites/like',{\"songId\":songId},{headers:{Authorization:\"Bearer \".concat(getUser.token)}}).then(response=>{console.log(response);fetchMusics();}).catch(error=>{console.log(error);});};if(!musicsList.length){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:\"No music found\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-bar\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-bar\",children:/*#__PURE__*/_jsx(\"section\",{className:\"musicList-container\",children:musicsList.map((music,i)=>{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MusicCard,{title:music.title,thumbnail:music.thumbnail,artist:[],library:true,id:music._id,setSelectedMusic:setMusicHandler,removeFavorite:removeFavorite},i)});})})})]}),selectedMusic&&/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(MusicPlayer,{thumbnail:selectedMusic.thumbnail,heart:true,title:selectedMusic.title,artist:selectedMusic.artist,audio_url:selectedMusic.audio_url})})]});}export default Library;","map":{"version":3,"names":["useState","useEffect","axios","MusicCard","MusicPlayer","Sidebar","useUser","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Library","isLoading","setIsLoading","musicsList","setMusicList","selectedMusic","setMusic","getUser","fetchMusics","musics","get","headers","Authorization","concat","token","console","log","data","musicListData","songs","err","setMusicHandler","id","removeFavorite","songId","patch","then","response","catch","error","length","style","textAlign","children","className","map","music","i","title","thumbnail","artist","library","_id","setSelectedMusic","heart","audio_url"],"sources":["/Users/salmanahmedg/Documents/NEWTON_BATCH/project_deployment/src/pages/Library.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport MusicCard from '../components/MusicCard';\nimport MusicPlayer from '../components/MusicPlayer';\nimport Sidebar from '../pages/Sidebar';\nimport { useUser } from '../helpers/UserProvider';\n\nfunction Library() {\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [musicsList, setMusicList] = useState([]);\n  const [selectedMusic, setMusic] = useState(null);\n  const { getUser } = useUser();\n\n  const fetchMusics = async () => {\n    try {\n      setIsLoading(true);\n      const musics = await axios.get('https://academics.newtonschool.co/api/v1/music/favorites/like', {\n        headers: {\n          Authorization: `Bearer ${getUser.token}`\n        }\n      })\n      console.log(\"musics\", musics.data.data);\n      const musicListData = musics.data.data.songs;\n      setMusicList(musicListData);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchMusics();\n  }, []);\n\n  const setMusicHandler = (id) => {\n    let selectedMusic = musicsList[id];\n    setMusic(selectedMusic);\n  }\n\n  const removeFavorite = (songId) => {\n    axios.patch('https://academics.newtonschool.co/api/v1/music/favorites/like', { \"songId\": songId }, {\n      headers: {\n        Authorization: `Bearer ${getUser.token}`\n      }\n    }).then((response) => {\n      console.log(response);\n      fetchMusics();\n    }).catch((error) => {\n      console.log(error);\n    })\n  }\n\n  if(!musicsList.length){\n    return <div style={{textAlign:'center'}}>No music found</div>\n  }\n\n  return (<>\n    <div className=\"global-container\">\n      <div className=\"left-bar\">\n        <Sidebar />\n      </div>\n      <div className=\"right-bar\">\n        <section className=\"musicList-container\">\n          {musicsList.map((music, i) => {\n            return (<>\n              <MusicCard key={i}\n                title={music.title}\n                thumbnail={music.thumbnail}\n                artist={[]}\n                library={true}\n                id={music._id}\n                setSelectedMusic={setMusicHandler}\n                removeFavorite={removeFavorite}\n              />\n             \n            </>)\n\n          })}\n\n        </section>\n\n      </div>\n    </div>\n    {selectedMusic && <section>\n      <MusicPlayer thumbnail={selectedMusic.thumbnail}\n        heart={true}\n        title={selectedMusic.title}\n        artist={selectedMusic.artist}\n        audio_url={selectedMusic.audio_url}\n      />\n    </section>}\n  </>)\n}\n\nexport default Library;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}